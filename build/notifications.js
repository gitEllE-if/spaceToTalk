function notifications(e){"use strict";let n=document.querySelector(".push"),t=document.querySelector(".push__image");function o(e){n.dataset.checked=e,n.checked=e,e?(n.classList.add("active"),t.src="push_on.svg"):(n.classList.remove("active"),t.src="push_off.svg")}n.addEventListener("click",(function(){"true"===n.dataset.checked?navigator.serviceWorker.ready.then((function(e){e.pushManager.getSubscription().then((function(e){e?e.unsubscribe().then((function(){alert("Успешно отписаны."),console.info("push-уведомлений отменены."),console.log(e),o(!1)})).catch((function(e){console.error(e)})):alert("Невозможно отписаться от push-уведомлений.")})).catch((function(e){console.error("Не получилось отписаться от push-уведомлений.")}))})):navigator.serviceWorker.ready.then((function(e){if(!e.pushManager)return alert("push-уведомления не поддерживаются вашим браузером."),!1;e.pushManager.subscribe({userVisibleOnly:!0}).then((function(e){alert("Успешно подписаны."),console.info("Подписаны на push-уведомления."),console.log(e),o(!0)})).catch((function(e){o(!1),console.error("Ошибка подписки на push-уведомления: ",e)}))}))})),"denied"!==Notification.permission?"PushManager"in e?navigator.serviceWorker.ready.then((function(e){e.pushManager.getSubscription().then((function(e){o(!!e)})).catch((function(e){console.error("Возникла ошибка",e)}))})):alert("Извините, push-уведомления не поддерживаются вашим браузером."):alert("Вы заблокировали push-уведомления")}notifications(window);